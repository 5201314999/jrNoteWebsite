(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{211:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("下面通过三种方法来搭建公司私有npm仓库，每种方式都有自己的优势。")]),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/cnpm/cnpmjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("cnpmjs.org"),a("OutboundLink")],1)]),t._v(" "),t._m(4),t._v(" "),t._m(5),a("p",[t._v("如果安装不流畅通过下面形式安装：")]),t._v(" "),t._m(6),t._m(7),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),t._m(10),t._m(11),t._v(" "),a("p",[t._v("将cnpm默认注册地址更改为私有注册地址")]),t._v(" "),t._m(12),t._m(13),t._v(" "),t._m(14),t._m(15),t._v(" "),a("p",[t._v("新建项目")]),t._v(" "),t._m(16),a("p",[t._v("上传到私有仓库")]),t._v(" "),t._m(17),t._m(18),t._v(" "),a("p",[t._v("浏览器中预览")]),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._m(22),t._v(" "),t._m(23),t._v(" "),t._m(24),t._m(25),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/verdaccio/verdaccio",target:"_blank",rel:"noopener noreferrer"}},[t._v("verdaccio"),a("OutboundLink")],1),t._v(" 是一个轻量级的私有npm代理注册。（"),a("a",{attrs:{href:"https://github.com/rlidwka/sinopia",target:"_blank",rel:"noopener noreferrer"}},[t._v("sinopia"),a("OutboundLink")],1),t._v(" fork）")]),t._v(" "),t._m(26),t._v(" "),t._m(27),t._m(28),t._v(" "),t._m(29),t._m(30),t._v(" "),t._m(31),t._m(32),t._v(" "),t._m(33),t._m(34),t._v(" "),t._m(35),t._m(36),t._v(" "),a("p",[t._v("这个方法得益于，npm提供的的丰富安装方法。通过下面方法安装：")]),t._v(" "),t._m(37),t._m(38),t._v(" "),t._m(39),t._v(" "),t._m(40),a("p",[t._v("⚠️ 将得到如下依赖，注意：")]),t._v(" "),t._m(41),t._v(" "),t._m(42),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),a("p",[t._v("将得到如下依赖")]),t._v(" "),t._m(46),a("p",[t._v("使用私有模块")]),t._v(" "),t._m(47),t._m(48),t._v(" "),t._m(49),t._v(" "),t._m(50),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/cevio/cpm",target:"_blank",rel:"noopener noreferrer"}},[t._v("cpm"),a("OutboundLink")],1),t._v(" 一套轻量化的 NPM 私有源管理程序")])]),t._v(" "),t._m(51),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://docs.npmjs.com/misc/registry#can-i-run-my-own-private-registry",target:"_blank",rel:"noopener noreferrer"}},[t._v("Can I run my own private registry?"),a("OutboundLink")],1)])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"在5分钟内搭建企业内部私有npm仓库-😄"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在5分钟内搭建企业内部私有npm仓库-😄","aria-hidden":"true"}},[this._v("#")]),this._v(" 在5分钟内搭建企业内部私有npm仓库 😄")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("Node.js >= 6.11.3，我的Node版本：node v8.2.1"),s("br"),this._v("\nLinux or OSX，我的系统版本：CentOS Linux release 7.2.1511 (Core)"),s("br"),this._v("\n目录\n===")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("a",{attrs:{href:"#cnpm%E6%90%AD%E5%BB%BA"}},[t._v("cnpm搭建")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85"}},[t._v("安装")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%90%AF%E5%8A%A8%E5%B9%B6%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1"}},[t._v("启动并配置服务")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E8%AE%BE%E7%BD%AE%E6%B3%A8%E5%86%8C%E5%9C%B0%E5%9D%80"}},[t._v("设置注册地址")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%99%BB%E5%BD%95cnpm"}},[t._v("登录cnpm")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93"}},[t._v("包上传到私有仓库")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9F%A5%E7%9C%8B%E9%A2%84%E8%A7%88%E5%8C%85"}},[t._v("查看预览包")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85-1"}},[t._v("安装")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E9%80%9A%E8%BF%87verdaccio%E6%90%AD%E5%BB%BA"}},[t._v("通过verdaccio搭建")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85-2"}},[t._v("安装")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"}},[t._v("启动服务")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E7%99%BB%E5%BD%95"}},[t._v("添加用户/登录")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E4%B8%8A%E4%BC%A0%E7%A7%81%E6%9C%89%E5%8C%85"}},[t._v("上传私有包")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%E6%B3%A8%E5%86%8C%E5%9C%B0%E5%9D%80"}},[t._v("本地配置注册地址")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#git%E4%BB%93%E5%BA%93%E5%BD%93%E7%A7%81%E6%9C%89npm"}},[t._v("Git仓库当私有npm")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%BB%BA%E7%AB%8B%E4%B8%80%E4%B8%AA%E7%A7%81%E6%9C%89%E6%A8%A1%E5%9D%97"}},[t._v("建立一个私有模块")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E7%A7%81%E6%9C%89%E6%A8%A1%E5%9D%97"}},[t._v("安装使用私有模块")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E4%BC%98%E5%8A%A3%E5%8A%BF"}},[t._v("优劣势")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[t._v("参考资料")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"cnpm搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cnpm搭建","aria-hidden":"true"}},[this._v("#")]),this._v(" cnpm搭建")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -g --build-from-source cnpmjs.org cnpm sqlite3\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 如果报错或者警告通过下面方式安装")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -g --unsafe-perm --verbose --build-from-source cnpmjs.org cnpm sqlite3\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -g --build-from-source \\\n  --registry"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org \\\n  --disturl"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("https://npm.taobao.org/mirrors/node \\\n  cnpmjs.org cnpm sqlite3\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果报警告或者安装错误，请添加参数"),s("code",[this._v("--unsafe-perm --verbose")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"启动并配置服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动并配置服务","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动并配置服务")])},function(){var t=this.$createElement,s=this._self._c||t;return s("blockquote",[s("p",[this._v("管理员："),s("code",[this._v("myname,othername")]),s("br"),this._v("\n范围："),s("code",[this._v("my-company-name,other-name")]),s("br"),this._v("\n默认端口：7001-registry, 7002-web\n启动服务")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("$ "),a("span",{attrs:{class:"token function"}},[t._v("nohup")]),t._v(" cnpmjs.org start --admins"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'myname,othername'")]),t._v(" \\\n  --scopes"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),a("span",{attrs:{class:"token string"}},[t._v("'@my-company-name,@other-name'")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"设置注册地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置注册地址","aria-hidden":"true"}},[this._v("#")]),this._v(" 设置注册地址")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("cnpm "),s("span",{attrs:{class:"token keyword"}},[this._v("set")]),this._v(" registry http://localhost:7001\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"登录cnpm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#登录cnpm","aria-hidden":"true"}},[this._v("#")]),this._v(" 登录cnpm")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ cnpm login\nUsername: myname\nPassword: ***\nEmail: "),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),this._v("this IS public"),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v(" test@test.com\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"包上传到私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包上传到私有仓库","aria-hidden":"true"}},[this._v("#")]),this._v(" 包上传到私有仓库")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v('$ cd /tmp\n$ mkdir helloworld && cd helloworld\n$ cnpm init\nname: (helloworld) @my-company-name/helloworld\nversion: (1.0.0)\n{\n  "name": "@my-company-name/helloworld",\n  "version": "1.0.0",\n  "description": "my first scoped package",\n  "main": "index.js",\n  "scripts": {\n    "test": "echo \\"Error: no test specified\\" && exit 1"\n  },\n  "author": "",\n  "license": "ISC"\n}\n')])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("$ cnpm publish\n+ @my-company-name/helloworld@1.0.0\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"查看预览包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看预览包","aria-hidden":"true"}},[this._v("#")]),this._v(" 查看预览包")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("open")]),this._v(" http://localhost:7002/@my-company-name/helloworld\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用"),s("code",[this._v("cnpm")]),this._v("预览")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("cnpm info\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("所有公共包都可直接使用"),s("code",[this._v("cnpm")]),this._v("安装")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[this._v("cnpm "),s("span",{attrs:{class:"token function"}},[this._v("install")]),this._v(" hotkeys-js\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"通过verdaccio搭建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#通过verdaccio搭建","aria-hidden":"true"}},[this._v("#")]),this._v(" 通过verdaccio搭建")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装-3"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-3","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 使用 npm 安装")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -g "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 使用 yarn 安装")]),t._v("\nyarn global add verdaccio\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动服务","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动服务")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("verdaccio -l 192.168.188.224:4873 "),a("span",{attrs:{class:"token operator"}},[t._v(">>")]),t._v(" verdaccio.log 2"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("1 "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("\nverdaccio "),a("span",{attrs:{class:"token operator"}},[t._v(">>")]),t._v(" verdaccio.log 2"),a("span",{attrs:{class:"token operator"}},[t._v(">")]),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v("1 "),a("span",{attrs:{class:"token operator"}},[t._v("&")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("# 后台启动并写入日志")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# Verdaccio doesn't need superuser privileges. Don't run it under root.")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# warn --- config file  - /root/.config/verdaccio/config.yaml")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# warn --- http address - http://localhost:4873/ - verdaccio/2.3.6")]),t._v("\nverdaccio --listen 4000 --config ./config.yaml "),a("span",{attrs:{class:"token comment"}},[t._v("# 指定配置启动")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"添加用户-登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加用户-登录","aria-hidden":"true"}},[this._v("#")]),this._v(" 添加用户/登录")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" adduser --registry  http://localhost:4873\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"上传私有包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传私有包","aria-hidden":"true"}},[this._v("#")]),this._v(" 上传私有包")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" publish --registry http://localhost:4873\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"本地配置注册地址"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地配置注册地址","aria-hidden":"true"}},[this._v("#")]),this._v(" 本地配置注册地址")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" config list -l "),a("span",{attrs:{class:"token comment"}},[t._v("# 查看默认配置")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 将默认地址 https://registry.npmjs.org/ 改成私有地址")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" registry http://localhost:4873\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 如果您使用HTTPS，请添加适当的CA信息")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("#（“null”表示从操作系统获取CA列表）")]),t._v("\n$ "),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" ca null\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"git仓库当私有npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git仓库当私有npm","aria-hidden":"true"}},[this._v("#")]),this._v(" Git仓库当私有npm")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -S git+ssh://git@git.showgold.cn:npm/hello.git\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -S git+ssh://git@github.com:npm/npm.git"),a("span",{attrs:{class:"token comment"}},[t._v("#v1.0.27")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -S git+ssh://git@github.com:npm/npm"),a("span",{attrs:{class:"token comment"}},[t._v("#semver:^5.0")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -S git+https://isaacs@github.com/npm/npm.git\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -S git://github.com/npm/npm.git"),a("span",{attrs:{class:"token comment"}},[t._v("#v1.0.27")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("⚠️ 上面安装需要注意：你的工程一定是在某一个组下面建立，方便管理，在生成你的包的时候"),s("code",[this._v("package.json")]),this._v("中的"),s("code",[this._v("name")]),this._v("一定要带上范围")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"建立一个私有模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#建立一个私有模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 建立一个私有模块")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 假设你建立了一个Git仓库，先克隆下来")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" clone http://git.your-inc.com/companyfe/hello-private.git\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 生成 `package.json` 配置, 注意限定 `@scope` 范围")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" init --scope"),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("companyfe\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 提交到仓库")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("git")]),t._v(" push origin master\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("blockquote",[a("p",[a("code",[t._v("name")]),t._v("字段必须限定范围，一般为 GitLab group 的名字, 例如 "),a("code",[t._v("@companyfe")]),t._v(", 那么 "),a("code",[t._v("name")]),t._v(" 为: "),a("code",[t._v("@companyfe/hello-private")]),t._v("。"),a("br"),t._v(" "),a("code",[t._v("private")]),t._v(" 设为 "),a("code",[t._v("true")]),t._v(" 防止将私有模块上传到公网上去，需要手动设置一下。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"@companyfe/hello-private"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"private"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"kenny wang <wowohoo@qq.com> (http://wangchujiang.com)"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"安装使用私有模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装使用私有模块","aria-hidden":"true"}},[this._v("#")]),this._v(" 安装使用私有模块")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("跟安装开源的模块一样, 使用 "),s("code",[this._v("npm install")]),this._v(" 安装依赖即可. 私有模块会安装在 "),s("code",[this._v("@scope")]),this._v(" 的子文件夹中, 例如: "),s("code",[this._v("node_modules/@companyfe/hello-private")]),this._v(".")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("# 基础安装")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -S git+ssh://git@git.your-inc.com/companyfe/hello-private.git\n"),a("span",{attrs:{class:"token comment"}},[t._v("# 带版本信息的，必须通过 git 打 tag")]),t._v("\n"),a("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" i -S git+ssh://git@git.your-inc.com/companyfe/hello-private.git"),a("span",{attrs:{class:"token comment"}},[t._v("#v1.2.0")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"name"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"helloworld"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"1.0.0"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"description"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('""')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"main"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"index.js"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"test"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"@companyfe/hello-private"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"git+ssh://git@git.your-inc.com/companyfe/hello-private.git#v1.2.0"')]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"author"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"kenny wang <wowohoo@qq.com> (http://wangchujiang.com)"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token property"}},[t._v('"license"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"ISC"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" hello "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("require")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'@companyfe/hello-private'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"优劣势"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优劣势","aria-hidden":"true"}},[this._v("#")]),this._v(" 优劣势")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("不好的地方是，使用 "),s("code",[this._v("npm update")]),this._v(" 是无法更新私有模块，想更新只能重新安装一次。好处是不用搭建服务。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"其它工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它工具","aria-hidden":"true"}},[this._v("#")]),this._v(" 其它工具")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考资料"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考资料","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考资料")])}],!1,null,null,null);e.options.__file="18privateNpmLib.md";s.default=e.exports}}]);