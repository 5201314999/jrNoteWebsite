<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 基础系列 - [时间格式化] | jrNote</title>
    <meta name="description" content="jr 笔记">
    <link rel="icon" href="/jrNoteWebsite/favicon.ico">
    
    <link rel="preload" href="/jrNoteWebsite/assets/css/styles.ef52c15a.css" as="style"><link rel="preload" href="/jrNoteWebsite/assets/js/app.ef52c15a.js" as="script"><link rel="preload" href="/jrNoteWebsite/assets/js/61.6b280eb8.js" as="script"><link rel="prefetch" href="/jrNoteWebsite/assets/css/1.styles.37672f4d.css"><link rel="prefetch" href="/jrNoteWebsite/assets/css/2.styles.56896ed6.css"><link rel="prefetch" href="/jrNoteWebsite/assets/css/3.styles.1e5b2a95.css"><link rel="prefetch" href="/jrNoteWebsite/assets/js/1.37672f4d.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/10.54d0b29b.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/11.507a45cf.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/12.9e788ba2.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/13.a4818e9d.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/14.227214e1.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/15.ddd3f6d7.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/16.279f83ed.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/17.2eeeaf73.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/18.cae9aa9d.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/19.106f0fae.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/2.56896ed6.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/20.94270539.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/21.18fb325d.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/22.60a98c3b.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/23.f0ae317a.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/24.e7900943.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/25.ed4e597b.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/26.46848f48.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/27.1cd75e6a.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/28.60882150.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/29.14caa5b4.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/3.1e5b2a95.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/30.5241ca98.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/31.923877bb.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/32.15c5b3d1.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/33.1cb52141.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/34.dda96f50.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/35.e7449be2.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/36.ceec2b74.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/37.59028316.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/38.5bb0eef8.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/39.357dec72.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/4.d15d075d.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/40.3b2545ff.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/41.3ec558a7.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/42.9be120e8.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/43.27e584be.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/44.85fab7e3.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/45.f005e7d1.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/46.cf3e199e.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/47.c33c5d66.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/48.1950445a.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/49.9929c7ea.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/5.f43ba467.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/50.e971cff8.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/51.27e59759.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/52.ef08a3c4.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/53.1fe88173.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/54.ecbcad41.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/55.c3d6deb4.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/56.6444e7e5.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/57.267d1ea3.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/58.79ae0eaa.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/59.8626850a.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/6.fb92c824.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/60.c40719a3.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/62.99c63958.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/63.a325df46.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/64.9bf05a8f.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/65.ebee5489.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/66.04574448.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/67.de1d3124.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/68.b5719589.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/69.e92c9009.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/7.006cc73e.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/8.5013f130.js"><link rel="prefetch" href="/jrNoteWebsite/assets/js/9.e717d895.js">
    <link rel="stylesheet" href="/jrNoteWebsite/assets/css/1.styles.37672f4d.css"><link rel="stylesheet" href="/jrNoteWebsite/assets/css/2.styles.56896ed6.css"><link rel="stylesheet" href="/jrNoteWebsite/assets/css/3.styles.1e5b2a95.css"><link rel="stylesheet" href="/jrNoteWebsite/assets/css/styles.ef52c15a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jrNoteWebsite/" class="home-link router-link-active"><!----> <span class="site-name">jrNote</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jrNoteWebsite/" class="nav-link">首页</a></div><div class="nav-item"><a href="/jrNoteWebsite/docs/" class="nav-link">储物柜</a></div><div class="nav-item"><a href="/jrNoteWebsite/frontend/" class="nav-link">复习</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/goal/goalList.html" class="nav-link">目标清单</a></li><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/more/js/" class="nav-link router-link-active">js知识</a></li><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/goal/todoList.html" class="nav-link">todoList</a></li></ul></div></div><div class="nav-item"><a href="/jrNoteWebsite/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/5201314999/jrNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jrNoteWebsite/" class="nav-link">首页</a></div><div class="nav-item"><a href="/jrNoteWebsite/docs/" class="nav-link">储物柜</a></div><div class="nav-item"><a href="/jrNoteWebsite/frontend/" class="nav-link">复习</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">更多</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/goal/goalList.html" class="nav-link">目标清单</a></li><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/more/js/" class="nav-link router-link-active">js知识</a></li><li class="dropdown-item"><!----> <a href="/jrNoteWebsite/goal/todoList.html" class="nav-link">todoList</a></li></ul></div></div><div class="nav-item"><a href="/jrNoteWebsite/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="https://github.com/5201314999/jrNote" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/jrNoteWebsite/more/js/" class="sidebar-link">js 知识</a></li><li><a href="/jrNoteWebsite/more/js/5tree.html" class="sidebar-link">中级知识篇</a></li><li><a href="/jrNoteWebsite/more/js/1jsTime.html" class="active sidebar-link">js 基础系列 - [时间格式化]</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jrNoteWebsite/more/js/1jsTime.html#date-完整api" class="sidebar-link">Date 完整api</a></li><li class="sidebar-sub-header"><a href="/jrNoteWebsite/more/js/1jsTime.html#个人常用date" class="sidebar-link">个人常用Date</a></li><li class="sidebar-sub-header"><a href="/jrNoteWebsite/more/js/1jsTime.html#date-格式化" class="sidebar-link">Date 格式化</a></li></ul></li><li><a href="/jrNoteWebsite/more/js/2es6js.html" class="sidebar-link">es6 有趣的知识点</a></li><li><a href="/jrNoteWebsite/more/js/3debounce_throttle.html" class="sidebar-link">防抖和节流的学习</a></li><li><a href="/jrNoteWebsite/more/js/4Array.html" class="sidebar-link">数组的基本api</a></li><li><a href="/jrNoteWebsite/more/js/6prototype.html" class="sidebar-link">原型链重点</a></li><li><a href="/jrNoteWebsite/more/js/7dom.html" class="sidebar-link">布局抖动问题</a></li><li><a href="/jrNoteWebsite/more/js/8eventanddom.html" class="sidebar-link">对于事件和dom的知识梳理</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="js-基础系列-时间格式化"><a href="#js-基础系列-时间格式化" aria-hidden="true" class="header-anchor">#</a> js 基础系列 - [时间格式化]</h1> <p>js 时间格式化在项目中使用频率非常高，平时基本都是直接拿来主义，直接使用别人的方法或者封装的库，最近公司事情不多，决定学习并总结一下原生的实现。</p> <h1 id="date-常用词语"><a href="#date-常用词语" aria-hidden="true" class="header-anchor">#</a> Date 常用词语</h1> <table><thead><tr><th style="text-align:center">名称</th> <th style="text-align:center">含义</th></tr></thead> <tbody><tr><td style="text-align:center">1970年1月1日</td> <td style="text-align:center">世界标准时间</td></tr> <tr><td style="text-align:center">UTC</td> <td style="text-align:center">世界协调时</td></tr></tbody></table> <h2 id="date-完整api"><a href="#date-完整api" aria-hidden="true" class="header-anchor">#</a> Date 完整api</h2> <p><a href="https://developer.mozilla.org/en*US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noopener noreferrer">mdn Date api<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="个人常用date"><a href="#个人常用date" aria-hidden="true" class="header-anchor">#</a> 个人常用Date</h2> <ul><li>new Date()</li></ul> <blockquote><p>参数接收多种多样, 日期字符串， 毫秒</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>    var today = new Date();
    var today = new Date(1453094034000); // by timestamp(accurate to the milliseconds)
    var birthday = new Date('December 17, 1995 03:24:00');
    var birthday = new Date('1995-12-17T03:24:00');
    var birthday = new Date(1995, 11, 17);
    var birthday = new Date(1995, 11, 17, 3, 24, 0);
    
    var unixTimestamp = Date.now(); // in milliseconds
</code></pre></div><ul><li>Date.now()</li></ul> <blockquote><p>返回毫秒</p></blockquote> <ul><li>Date.parse()</li></ul> <blockquote><p>参数某个日期字符串，返回毫秒</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var unixTimeZero = Date.parse('01 Jan 1970 00:00:00 GMT');
var javaScriptRelease = Date.parse('04 Dec 1995 00:12:00 GMT');

console.log(unixTimeZero);
// expected output: 0

console.log(javaScriptRelease);
// expected output: 818035920000

</code></pre></div><ul><li>Date.prototype.getTime()</li></ul> <blockquote><p>返回毫秒</p></blockquote> <ul><li>Date.prototype.valueOf()</li></ul> <blockquote><p>与 getTime（） 功能一致</p></blockquote> <ul><li>Date.toUTCString()</li></ul> <blockquote><p>日期转为字符串，个人比较少用</p></blockquote> <ul><li>Date.UTC()</li></ul> <blockquote><p>返回毫秒 接受6位参数 year month date h m s ms</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var event = new Date('14 Jun 2017 00:00:00 PDT');

console.log(event.toUTCString());
// expected output: Wed, 14 Jun 2017 07:00:00 GMT
</code></pre></div><ul><li>Date.prototype.toLocaleString()</li></ul> <blockquote><p>结合使用的语言返回字符串</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>var event = new Date(Date.UTC(2012, 11, 20, 3, 0, 0));

// British English uses day-month-year order and 24-hour time without AM/PM
console.log(event.toLocaleString('en-GB', { timeZone: 'UTC' }));
// expected output: 20/12/2012, 03:00:00

// Korean uses year-month-day order and 12-hour time with AM/PM
console.log(event.toLocaleString('ko-KR', { timeZone: 'UTC' }));
// expected output: 2012. 12. 20. 오전 3:00:00
</code></pre></div><ul><li>Date.prototype.setDate()</li></ul> <p>设置当月第几天
<strong>如果 dayValue 超出了月份的合理范围，setDate 将会相应地更新 Date 对象</strong>。例如，如果为 dayValue 指定0，那么日期就会被设置为上个月的最后一天。</p> <ul><li>Date.prototype.getDate()</li></ul> <p>获取当月的第几天</p> <ul><li>Date.getDay()</li></ul> <p>返回周几 ，数字</p> <ul><li>Date.getMonth()</li></ul> <p><code>0 起始，所以要加1</code></p> <h2 id="date-格式化"><a href="#date-格式化" aria-hidden="true" class="header-anchor">#</a> Date 格式化</h2> <p>1 日期格式化,ge</p> <div class="language- extra-class"><pre class="language-text"><code>//不支持12小时制，不过用了正则表达式
function dateFtt(fmt,date)   
{ //author: meizz   
  var o = {   
    &quot;M+&quot; : date.getMonth()+1,                 //月份   
    &quot;d+&quot; : date.getDate(),                    //日   
    &quot;h+&quot; : date.getHours(),                   //小时   
    &quot;m+&quot; : date.getMinutes(),                 //分   
    &quot;s+&quot; : date.getSeconds(),                 //秒   
    &quot;q+&quot; : Math.floor((date.getMonth()+3)/3), //季度   
    &quot;S&quot;  : date.getMilliseconds()             //毫秒   
  };   
  if(/(y+)/.test(fmt))   
    fmt=fmt.replace(RegExp.$1, (date.getFullYear()+&quot;&quot;).substr(4 - RegExp.$1.length));   
  for(var k in o)   
    if(new RegExp(&quot;(&quot;+ k +&quot;)&quot;).test(fmt))   
  fmt = fmt.replace(RegExp.$1, (RegExp.$1.length==1) ? (o[k]) : ((&quot;00&quot;+ o[k]).substr((&quot;&quot;+ o[k]).length)));   
  return fmt;   
}

</code></pre></div><p>2 获取周一的日期</p> <div class="language- extra-class"><pre class="language-text"><code>// 获取今天之前最近星期一的日期,字符串
const getMondayDate = () =&gt; {
  const date = new Date()
  date.setDate(date.getDate() - (date.getDay() - 1))
  const y = date.getFullYear()
  let m = date.getMonth() + 1
  let d = date.getDate()
  m &lt; 10 &amp;&amp; (m = '0' + m)
  d &lt; 10 &amp;&amp; (d = '0' + d)
  return y + '-' + m + '-' + d
}

</code></pre></div><p>时间撮：</p> <h1 id="获取时间撮"><a href="#获取时间撮" aria-hidden="true" class="header-anchor">#</a> 获取时间撮</h1> <p>+new Date()</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2018-12-24 17:49:45</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/jrNoteWebsite/more/js/5tree.html" class="prev">
          中级知识篇
        </a></span> <span class="next"><a href="/jrNoteWebsite/more/js/2es6js.html">
          es6 有趣的知识点
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/jrNoteWebsite/assets/js/61.6b280eb8.js" defer></script><script src="/jrNoteWebsite/assets/js/app.ef52c15a.js" defer></script>
  </body>
</html>
